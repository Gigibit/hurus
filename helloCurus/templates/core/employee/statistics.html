{% extends 'base.html' %}
{% load static %}
{% load i18n %}

{% block head_css_section %}
 <link href="{% static 'css/statistics.css' %}?{% now "U" %}" rel="stylesheet">
{% endblock head_css_section %}

{% block content %}
<div class="row">
    <div class="chart-wrapper col-md-6">
        <div id="bar-chart" class="chart"></div>
    </div>
    <div class="chart-wrapper col-md-6">
        <div id="line-chart" class="chart"></div>
    </div>
</div>
<script>
    function count(obj) { return Object.keys(obj).length; }

    var moods = {
        {% for mood in moods %}
        {{mood.value}} : {
            'icon'  : "{% static mood.icon.name %}"
        },
        {% endfor %}
    }
    
    var data = [
        {% for tought in toughts%}
            {
                "date": "{{ tought.created_at|date:"d-m-Y" }}", //H:i
                "mood": "{{tought.mood.value}}",
                "name": "{{tought.mood.i18n_key}}"
            },
        {% endfor %}
    ]
    var img = "https://upload.wikimedia.org/wikipedia/commons/thumb/e/e6/Noto_Emoji_KitKat_263a.svg/1200px-Noto_Emoji_KitKat_263a.svg.png"



    data.forEach(function(d){
        d.date = d3.timeParse("%d-%m-%Y")(d.date) //%H:%M
        d.mood = d.mood 
    })





</script>
<script src="{% static 'js/statistics.js' %}?v={% now "U" %}" type="text/javascript"></script>
<script>


    $(document).ready(lineChart)
    $(document).ready(barChart)
</script>

{% endblock %}